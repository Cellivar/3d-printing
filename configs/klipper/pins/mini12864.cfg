[display]
  lcd_type: uc1701
  contrast: 40
  cs_pin:   EXP1_3
  a0_pin:   EXP1_4
  rst_pin:  EXP1_5

  encoder_pins: ^EXP2_5, ^EXP2_3
  click_pin   : ^!EXP1_2
  spi_bus     : spi1

[output_pin beeper_btt_mini12864]
  pin: EXP1_1
  value: 0
  shutdown_value: 0
  pwm: True
  cycle_time: 0.0005 ; Default beeper tone in kHz. 1 / 0.0005 = 2000Hz (2kHz)

[gcode_macro BEEP]
  gcode:
    # Parameters
    {% set i = params.I|default(1)|int %}           ; Iterations (number of times to beep).
    {% set dur = params.DUR|default(100)|int %}     ; Duration/wait of each beep in ms. Default 100ms.
    {% set freq = params.FREQ|default(2000)|int %}  ; Frequency in Hz. Default 2kHz.

    {% for iteration in range(i|int) %}
        SET_PIN PIN=beeper_btt_mini12864 VALUE=0.8 CYCLE_TIME={ 1.0/freq if freq > 0 else 1 }
        G4 P{dur}
        SET_PIN PIN=beeper_btt_mini12864 VALUE=0
        G4 P{dur}
    {% endfor %}

[neopixel btt_mini12864]
  pin: EXP1_6
  chain_count:   3
  color_order:   RGB
  initial_RED:   0.4
  initial_GREEN: 0.4
  initial_BLUE:  0.4

##  Set RGB values on boot up for each Neopixel.
##  Index 1 = display, Index 2 and 3 = Knob
[delayed_gcode setdisplayneopixel]
  initial_duration: 1
  gcode:
    SET_LED LED=btt_mini12864 RED=0.5 GREEN=0.5 BLUE=0.5 INDEX=1 TRANSMIT=0
    SET_LED LED=btt_mini12864 RED=0.7 GREEN=0.3 BLUE=0.6 INDEX=2 TRANSMIT=0
    SET_LED LED=btt_mini12864 RED=0.7 GREEN=0.3 BLUE=0.6 INDEX=3
